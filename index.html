<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PogaReminder</title>
  
  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#2563eb">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="PogaReminder">
  <meta name="description" content="Complete bike tracking and reminder app for serious cyclists">
  
  <!-- PWA Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%232563eb'/><text y='50' font-size='40' text-anchor='middle' x='50' fill='white'>🚴</text></svg>">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%232563eb'/><text y='50' font-size='40' text-anchor='middle' x='50' fill='white'>🚴</text></svg>">
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="data:application/manifest+json,{
    'name': 'PogaReminder - Complete Bike Tracker',
    'short_name': 'PogaReminder',
    'description': 'Complete bike tracking, reminders and cycling tools for serious cyclists',
    'start_url': '/',
    'display': 'standalone',
    'background_color': '#2563eb',
    'theme_color': '#2563eb',
    'orientation': 'portrait-primary',
    'categories': ['sports', 'fitness', 'productivity'],
    'icons': [
      {
        'src': 'data:image/svg+xml,<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'><rect width=\'100\' height=\'100\' fill=\'%232563eb\'/><text y=\'50\' font-size=\'40\' text-anchor=\'middle\' x=\'50\' fill=\'white\'>🚴</text></svg>',
        'sizes': '192x192',
        'type': 'image/svg+xml'
      },
      {
        'src': 'data:image/svg+xml,<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'><rect width=\'100\' height=\'100\' fill=\'%232563eb\'/><text y=\'50\' font-size=\'40\' text-anchor=\'middle\' x=\'50\' fill=\'white\'>🚴</text></svg>',
        'sizes': '512x512',
        'type': 'image/svg+xml'
      }
    ]
  }">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
      color: white; min-height: 100vh; padding: 20px;
    }
    .container {
      max-width: 800px; margin: 0 auto;
      background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px);
      border-radius: 20px; padding: 30px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }
    h1 { text-align: center; font-size: 2.5em; margin-bottom: 30px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      background: linear-gradient(45deg, #fbbf24, #f59e0b);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    section {
      background: rgba(255, 255, 255, 0.1); border-radius: 15px;
      padding: 25px; margin-bottom: 25px; border: 1px solid rgba(255, 255, 255, 0.2);
      transition: transform 0.3s ease;
    }
    section:hover { transform: translateY(-5px); }
    h2 { font-size: 1.5em; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
    input, textarea, button {
      width: 100%; padding: 12px; border: none; border-radius: 10px;
      font-size: 1em; margin-bottom: 10px; transition: all 0.3s ease;
    }
    input, textarea { background: rgba(255, 255, 255, 0.9); color: #333; }
    input:focus, textarea:focus {
      outline: none; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);
      transform: scale(1.02);
    }
    button {
      background: linear-gradient(45deg, #fbbf24, #f59e0b); color: #333;
      font-weight: bold; cursor: pointer; transition: all 0.3s ease;
    }
    button:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(251, 191, 36, 0.3); }
    button:active { transform: translateY(0); }
    button.remove {
      background: linear-gradient(45deg, #ef4444, #dc2626); color: white;
      padding: 5px 10px; font-size: 0.8em; width: auto; margin-left: 10px;
    }
    textarea { min-height: 100px; resize: vertical; font-family: inherit; }
    ul { list-style: none; }
    li {
      background: rgba(255, 255, 255, 0.1); margin: 10px 0; padding: 15px;
      border-radius: 10px; display: flex; align-items: center; justify-content: space-between;
      border-left: 4px solid #fbbf24; transition: all 0.3s ease;
    }
    li:hover { background: rgba(255, 255, 255, 0.2); transform: translateX(5px); }
    li.completed { opacity: 0.6; text-decoration: line-through; border-left-color: #10b981; }
    a { color: #fbbf24; text-decoration: none; font-weight: bold; transition: all 0.3s ease; }
    a:hover { color: #f59e0b; text-shadow: 0 0 10px rgba(251, 191, 36, 0.5); }
    .notification {
      position: fixed; top: 20px; right: 20px;
      background: linear-gradient(45deg, #22c55e, #16a34a); color: white;
      padding: 15px 20px; border-radius: 10px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
      z-index: 1000; opacity: 0; transform: translateX(100%); transition: all 0.3s ease;
    }
    .notification.show { opacity: 1; transform: translateX(0); }
    .notification.error { background: linear-gradient(45deg, #ef4444, #dc2626); }
    .controls { display: flex; gap: 10px; align-items: center; }
    .checkbox { width: 20px; height: 20px; margin-right: 10px; cursor: pointer; }
    @media (max-width: 768px) {
      .container { padding: 20px; margin: 10px; }
      h1 { font-size: 2em; }
      .controls { flex-direction: column; align-items: stretch; }
    }
    .stats {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px; margin-bottom: 20px;
    }
    .stat-card {
      background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 10px;
      text-align: center; border: 1px solid rgba(255, 255, 255, 0.2);
    }
    .stat-number { font-size: 2em; font-weight: bold; color: #fbbf24; }
    .tab-navigation {
      display: flex; gap: 10px; margin-bottom: 30px; justify-content: center;
    }
    .tab-btn {
      background: rgba(255, 255, 255, 0.2); color: white; border: none;
      border-radius: 25px; padding: 12px 25px; cursor: pointer;
      transition: all 0.3s ease; font-size: 1em; font-weight: bold;
    }
    .tab-btn.active {
      background: linear-gradient(45deg, #fbbf24, #f59e0b); color: #333;
    }
    .tab-btn:hover:not(.active) { background: rgba(255, 255, 255, 0.3); }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
  </style>
</head>
<body>
  <div class="container">
    <h1>PogaReminder 🚴‍♂️</h1>

    <!-- Tab Navigation -->
    <div class="tab-navigation">
      <button class="tab-btn active" onclick="switchTab('main')">📋 Principal</button>
      <button class="tab-btn" onclick="switchTab('bike')">🚴‍♂️ Bike Tracker</button>
      <button class="tab-btn" onclick="switchTab('settings')">⚙️ Setări</button>
    </div>

    <!-- Main Tab -->
    <div id="main-tab" class="tab-content active">
      <div class="stats">
        <div class="stat-card">
          <div class="stat-number" id="active-reminders">0</div>
          <div>Reminder-uri active</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="pending-todos">0</div>
          <div>Sarcini în așteptare</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="completed-todos">0</div>
          <div>Sarcini finalizate</div>
        </div>
      </div>

      <section>
        <h2>🔔 Reminder</h2>
        <div class="controls">
          <input type="datetime-local" id="reminder-time" style="flex: 1;">
          <input type="text" id="reminder-text" placeholder="Mesaj reminder..." style="flex: 1;">
          <button onclick="setReminder()" style="width: auto; padding: 12px 20px;">Setează</button>
        </div>
        <ul id="reminders-list"></ul>
      </section>

      <section>
        <h2>✅ To-Do</h2>
        <div class="controls">
          <input id="todo-input" placeholder="Adaugă sarcină..." style="flex: 1;">
          <button onclick="addTodo()" style="width: auto; padding: 12px 20px;">Adaugă</button>
        </div>
        <ul id="todo-list"></ul>
      </section>

      <section>
        <h2>📝 Notițe</h2>
        <textarea id="notes" placeholder="Scrie notițele tale aici..."></textarea>
        <button onclick="saveNotes()">Salvează notițe</button>
      </section>

      <section>
        <h2>🔗 Linkuri Utile</h2>
        
        <h3 style="margin: 15px 0 10px 0; color: #fbbf24;">📺 Știri România</h3>
        <ul>
          <li><a href="https://www.digi.ro" target="_blank">📺 Digi24 - Știri în timp real</a></li>
          <li><a href="https://www.g4.ro" target="_blank">📱 G4Media - Jurnalism independent</a></li>
          <li><a href="https://www.hotnews.ro" target="_blank">🔥 HotNews - Ultimele știri</a></li>
        </ul>

        <h3 style="margin: 15px 0 10px 0; color: #fbbf24;">🚴‍♂️ Ciclism</h3>
        <ul>
          <li><a href="https://www.letour.fr" target="_blank">🏆 Turul Franței - Site Oficial</a></li>
          <li><a href="https://www.procyclingstats.com" target="_blank">📊 ProCyclingStats - Statistici Complete</a></li>
          <li><a href="https://www.cyclingnews.com" target="_blank">📰 CyclingNews - Știri și Analize</a></li>
        </ul>
      </section>
    </div>

    <!-- Bike Tracker Tab -->
    <div id="bike-tab" class="tab-content">
      <section>
        <h2>🚴‍♂️ Coming Soon!</h2>
        <p style="text-align: center; padding: 40px; opacity: 0.8;">
          Bike Tracker cu GPS, challenge-uri și statistici va fi disponibil în curând! 🚀
        </p>
      </section>
    </div>

    <!-- Settings Tab -->
    <div id="settings-tab" class="tab-content">
      <section>
        <h2>⚙️ Setări</h2>
        <p style="text-align: center; padding: 40px; opacity: 0.8;">
          Panoul de setări va fi disponibil în curând! 🔧
        </p>
      </section>
    </div>
  </div>

  <div id="notification" class="notification"></div>

  <audio id="alarm" preload="auto">
    <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+PsumMeBC2E0fPTdjMFLILU8dODNwgZZrTu559NEAxUtujvul4dBS+E0fPUeSUGKIPA8dWLOA==" type="audio/wav">
  </audio>

  <script>
    // Data storage
    let appData = {
      reminders: [],
      todos: [],
      notes: ''
    };
    
    let reminderCheckInterval;

    function initApp() {
      loadData();
      renderAll();
      startReminderCheck();
      showNotification('PogaReminder pornit cu succes! 🚀', 'success');
    }

    function loadData() {
      try {
        const saved = localStorage.getItem('pogaReminder-data');
        if (saved) {
          appData = JSON.parse(saved);
          // Convert date strings back to Date objects
          appData.reminders.forEach(reminder => {
            reminder.time = new Date(reminder.time);
            reminder.created = new Date(reminder.created);
          });
          appData.todos.forEach(todo => {
            todo.created = new Date(todo.created);
          });
        }
      } catch (error) {
        console.error('Error loading data:', error);
        showNotification('Eroare la încărcarea datelor. Se folosesc date noi.', 'error');
      }
      updateStats();
    }

    function saveData() {
      try {
        localStorage.setItem('pogaReminder-data', JSON.stringify(appData));
        updateStats();
      } catch (error) {
        console.error('Error saving data:', error);
        showNotification('Eroare la salvarea datelor!', 'error');
      }
    }

    function renderAll() {
      renderReminders();
      renderTodos();
      renderNotes();
      updateStats();
    }

    // TAB MANAGEMENT
    function switchTab(tabName) {
      // Hide all tabs
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // Show selected tab
      document.getElementById(`${tabName}-tab`).classList.add('active');
      event.target.classList.add('active');
    }

    // REMINDER FUNCTIONS
    function setReminder() {
      const timeInput = document.getElementById('reminder-time');
      const textInput = document.getElementById('reminder-text');
      
      if (!timeInput.value) {
        showNotification('Te rog selectează o dată și oră!', 'error');
        return;
      }

      const reminderTime = new Date(timeInput.value);
      const now = new Date();
      
      if (reminderTime <= now) {
        showNotification('Te rog selectează o dată din viitor!', 'error');
        return;
      }

      const reminder = {
        id: Date.now(),
        time: reminderTime,
        text: textInput.value || 'Reminder',
        active: true,
        created: new Date()
      };

      appData.reminders.push(reminder);
      saveData();
      renderReminders();
      
      timeInput.value = '';
      textInput.value = '';
      
      showNotification(`Reminder setat pentru ${formatDateTime(reminderTime)}! ⏰`, 'success');
    }

    function renderReminders() {
      const list = document.getElementById('reminders-list');
      const now = new Date();
      
      list.innerHTML = appData.reminders.map(reminder => {
        const isExpired = reminder.time <= now;
        const timeLeft = reminder.time - now;
        const timeLeftStr = timeLeft > 0 ? formatTimeLeft(timeLeft) : 'Expirat';
        
        return `
          <li style="background: ${isExpired ? 'rgba(239, 68, 68, 0.2)' : 'rgba(34, 197, 94, 0.2)'}; border-left-color: ${isExpired ? '#ef4444' : '#22c55e'}">
            <div>
              <strong>${reminder.text}</strong><br>
              <small>${formatDateTime(reminder.time)} (${timeLeftStr})</small>
            </div>
            <button class="remove" onclick="removeReminder(${reminder.id})">Șterge</button>
          </li>
        `;
      }).join('');
    }

    function removeReminder(id) {
      appData.reminders = appData.reminders.filter(r => r.id !== id);
      saveData();
      renderReminders();
      showNotification('Reminder șters!', 'success');
    }

    function startReminderCheck() {
      reminderCheckInterval = setInterval(() => {
        const now = new Date();
        appData.reminders.forEach(reminder => {
          if (reminder.active && reminder.time <= now) {
            triggerReminder(reminder);
            reminder.active = false;
          }
        });
        renderReminders();
      }, 1000);
    }

    function triggerReminder(reminder) {
      // Play alarm sound
      const alarm = document.getElementById('alarm');
      alarm.play().catch(() => {
        console.log('Audio playback failed');
      });
      
      // Show notification
      showNotification(`🔔 REMINDER: ${reminder.text}`, 'success', 10000);
      
      // Browser notification if supported
      if ('Notification' in window && Notification.permission === 'granted') {
        new Notification('PogaReminder', {
          body: reminder.text,
          icon: '🔔'
        });
      }
    }

    // TODO FUNCTIONS
    function addTodo() {
      const input = document.getElementById('todo-input');
      const text = input.value.trim();
      
      if (!text) {
        showNotification('Te rog scrie o sarcină!', 'error');
        return;
      }

      const todo = {
        id: Date.now(),
        text: text,
        completed: false,
        created: new Date()
      };

      appData.todos.push(todo);
      saveData();
      renderTodos();
      
      input.value = '';
      showNotification('Sarcină adăugată! ✅', 'success');
    }

    function renderTodos() {
      const list = document.getElementById('todo-list');
      
      list.innerHTML = appData.todos.map(todo => `
        <li class="${todo.completed ? 'completed' : ''}">
          <div style="display: flex; align-items: center;">
            <input type="checkbox" class="checkbox" ${todo.completed ? 'checked' : ''} 
                   onchange="toggleTodo(${todo.id})">
            <span>${todo.text}</span>
          </div>
          <button class="remove" onclick="removeTodo(${todo.id})">Șterge</button>
        </li>
      `).join('');
    }

    function toggleTodo(id) {
      const todo = appData.todos.find(t => t.id === id);
      if (todo) {
        todo.completed = !todo.completed;
        saveData();
        renderTodos();
        showNotification(todo.completed ? 'Sarcină finalizată! 🎉' : 'Sarcină reactivată!', 'success');
      }
    }

    function removeTodo(id) {
      appData.todos = appData.todos.filter(t => t.id !== id);
      saveData();
      renderTodos();
      showNotification('Sarcină ștearsă!', 'success');
    }

    // NOTES FUNCTIONS
    function renderNotes() {
      const notesElement = document.getElementById('notes');
      notesElement.value = appData.notes || '';
      notesElement.disabled = false;
      notesElement.readOnly = false;
    }

    function saveNotes() {
      const notesElement = document.getElementById('notes');
      appData.notes = notesElement.value;
      saveData();
      
      // Visual feedback for manual save
      const originalBg = notesElement.style.backgroundColor;
      notesElement.style.backgroundColor = 'rgba(34, 197, 94, 0.3)';
      setTimeout(() => {
        notesElement.style.backgroundColor = originalBg;
      }, 500);
      
      showNotification('Notițe salvate manual! 📝', 'success');
    }

    // UTILITY FUNCTIONS
    function updateStats() {
      const activeReminders = appData.reminders.filter(r => r.active && r.time > new Date()).length;
      const pendingTodos = appData.todos.filter(t => !t.completed).length;
      const completedTodos = appData.todos.filter(t => t.completed).length;
      
      document.getElementById('active-reminders').textContent = activeReminders;
      document.getElementById('pending-todos').textContent = pendingTodos;
      document.getElementById('completed-todos').textContent = completedTodos;
    }

    function formatDateTime(date) {
      return date.toLocaleString('ro-RO', {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit'
      });
    }

    function formatTimeLeft(ms) {
      const days = Math.floor(ms / (1000 * 60 * 60 * 24));
      const hours = Math.floor((ms % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((ms % (1000 * 60 * 60)) / (1000 * 60));
      
      if (days > 0) return `${days}z ${hours}h`;
      if (hours > 0) return `${hours}h ${minutes}m`;
      return `${minutes}m`;
    }

    function showNotification(message, type = 'success', duration = 4000) {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = `notification ${type} show`;
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, duration);
    }

    // Request notification permission
    if ('Notification' in window && Notification.permission === 'default') {
      Notification.requestPermission();
    }

    // Auto-save notes
    document.addEventListener('DOMContentLoaded', () => {
      initApp();
      
      // Auto-save notes with visual feedback
      document.getElementById('notes').addEventListener('input', (e) => {
        clearTimeout(window.notesSaveTimeout);
        window.notesSaveTimeout = setTimeout(() => {
          appData.notes = e.target.value;
          saveData();
          // Show subtle feedback that notes are saved
          const originalBg = e.target.style.backgroundColor;
          e.target.style.backgroundColor = 'rgba(34, 197, 94, 0.1)';
          setTimeout(() => {
            e.target.style.backgroundColor = originalBg;
          }, 200);
        }, 1000);
      });
      
      // Handle enter key in inputs
      document.getElementById('todo-input').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') addTodo();
      });

      document.getElementById('reminder-text').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') setReminder();
      });
    });
  </script>
</body>
</html>
